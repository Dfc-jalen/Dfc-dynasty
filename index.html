<script>
let authMode = 'signup';

function toggleMobileMenu() {
  const menu = document.getElementById('mobileMenu');
  menu.classList.toggle('hidden');
}

function showAuth(mode) {
  authMode = mode;
  document.getElementById('authModal').classList.remove('hidden');
  updateAuthModal();
}

function closeAuth() {
  document.getElementById('authModal').classList.add('hidden');
}

function toggleAuthMode() {
  authMode = authMode === 'signup' ? 'login' : 'signup';
  updateAuthModal();
}

function updateAuthModal() {
  if (authMode === 'signup') {
    document.getElementById('authTitle').textContent = 'Create Account';
    document.getElementById('authButton').textContent = 'Sign Up - Free';
    document.getElementById('authSwitch').textContent = 'Already have an account?';
    document.getElementById('authToggle').textContent = 'Login';
  } else {
    document.getElementById('authTitle').textContent = 'Login';
    document.getElementById('authButton').textContent = 'Login';
    document.getElementById('authSwitch').textContent = "Don't have an account?";
    document.getElementById('authToggle').textContent = 'Sign Up';
  }
}

// Simple auth simulation (Supabase removed)
function handleAuth(event) {
  event.preventDefault();
  if (authMode === 'signup') {
    alert('ðŸŽ‰ Account created! You now have access to free content.');
  } else {
    alert('âœ… Logged in successfully!');
  }
  closeAuth();
  unlockContent();
}

// Unlock content
function unlockContent() {
  // Hide all "Sign Up to Access" buttons
  document.querySelectorAll('button[onclick="showAuth(\'signup\')"]').forEach(btn => btn.style.display = 'none');
}

// Premium and voucher functions
function purchasePremium() {
  alert('ðŸŽ‰ Premium Access Purchased!\n\nâœ… Your Premium Content is Now Unlocked!\n\nðŸ“± NEXT STEP - Get Your Discord Role:\n1. Join our Discord: https://discord.gg/JYMTyK6TbR\n2. Go to the #verification channel\n3. Submit your purchase confirmation\n4. You\'ll receive the "eBook Member" role\n5. Access exclusive private channels!\n\nAll premium schemes are now unlocked!');
}

function redeemVoucher() {
  const code = document.getElementById('voucherInput').value.toUpperCase();
  const error = document.getElementById('voucherError');

  if (code === 'DFC5') {
    alert('ðŸŽ‰ Voucher Code Accepted! Welcome Back!\n\nâœ… Your Premium Content is Now Unlocked!\n\nðŸ“± DISCORD ACCESS:\n1. Join our Discord: https://discord.gg/JYMTyK6TbR\n2. Go to the #verification channel\n3. Submit your voucher code: DFC5\n4. You\'ll receive the "eBook Member" role\n5. Access exclusive private channels!\n\nAll premium schemes are now unlocked!');
    document.getElementById('voucherInput').value = '';
    error.classList.add('hidden');
  } else {
    error.classList.remove('hidden');
  }
}

// Smooth scroll for anchor links
document.querySelectorAll('a[href^="#"]').forEach(anchor => {
  anchor.addEventListener('click', function(e) {
    e.preventDefault();
    const target = document.querySelector(this.getAttribute('href'));
    if (target) target.scrollIntoView({ behavior: 'smooth' });
    document.getElementById('mobileMenu').classList.add('hidden');
  });
});

// Optional: Unlock free content automatically for demo purposes
window.addEventListener('DOMContentLoaded', () => {
  unlockContent();
});
</script>
